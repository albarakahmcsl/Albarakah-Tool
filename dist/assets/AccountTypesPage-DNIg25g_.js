import{c as D,e as E,r as i,j as e,t as B,v as f,i as y,q as x,p as J}from"./index-M2hJuDYi.js";import{u as C}from"./useQuery-eoL25xFq.js";import{u as j,P as O,S as K,T as R}from"./trash-2-DUX7L9we.js";import{B as U}from"./banknote-CKtgyLzi.js";import{D as Q}from"./dollar-sign-BFSF7bs6.js";import{S as I}from"./square-pen-Be_6kmVO.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=D("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function ee(){const l=E(),[d,m]=i.useState(""),[o,a]=i.useState(!1),[c,t]=i.useState(!1),[r,n]=i.useState(null),[v,p]=i.useState(null),[N,b]=i.useState(null),{data:g,isLoading:A}=C({queryKey:x.accountTypes(),queryFn:f.getAccountTypes}),{data:h}=C({queryKey:x.bankAccounts(),queryFn:J.getBankAccounts}),w=j({mutationFn:f.createAccountType,onSuccess:()=>{b("Account type created successfully"),a(!1),l.invalidateQueries({queryKey:x.accountTypes()})},onError:s=>{p(s instanceof y?s.message:"Failed to create account type")}}),k=j({mutationFn:({accountTypeId:s,accountTypeData:u})=>f.updateAccountType(s,u),onSuccess:()=>{b("Account type updated successfully"),t(!1),n(null),l.invalidateQueries({queryKey:x.accountTypes()})},onError:s=>{p(s instanceof y?s.message:"Failed to update account type")}}),_=j({mutationFn:f.deleteAccountType,onSuccess:()=>{b("Account type deleted successfully"),l.invalidateQueries({queryKey:x.accountTypes()})},onError:s=>{p(s instanceof y?s.message:"Failed to delete account type")}}),T=s=>{w.mutate(s)},q=s=>{r&&k.mutate({accountTypeId:r.id,accountTypeData:s})},F=s=>{confirm("Are you sure you want to delete this account type? This action cannot be undone.")&&_.mutate(s)},P=(g==null?void 0:g.account_types)||[],S=(h==null?void 0:h.bank_accounts)||[],M=A||w.isPending||k.isPending||_.isPending,L=P.filter(s=>{var u;return s.name.toLowerCase().includes(d.toLowerCase())||s.description&&s.description.toLowerCase().includes(d.toLowerCase())||((u=s.bank_accounts)==null?void 0:u.name)&&s.bank_accounts.name.toLowerCase().includes(d.toLowerCase())});return e.jsxs("div",{className:"space-y-6 pt-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Type Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Define and manage different types of accounts offered to members."})]}),e.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Add Account Type"]})]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-red-800",children:v})}),N&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsx("p",{className:"text-green-800",children:N})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:d,onChange:s=>m(s.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Search account types..."})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:M?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):e.jsx("ul",{className:"divide-y divide-gray-200",children:L.map(s=>{var u;return e.jsx("li",{children:e.jsxs("div",{className:"px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center",children:e.jsx(B,{className:"h-5 w-5 text-emerald-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-gray-500",children:s.description}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Landmark,{className:"h-4 w-4 mr-1"})," Bank: ",((u=s.bank_accounts)==null?void 0:u.name)||"N/A"]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-1"})," Min Balance: ",s.min_balance.toLocaleString("en-US",{style:"currency",currency:"USD"})]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-1"})," Profit Rate: ",s.profit_rate,"%"]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 mr-1"})," Processing Fee: ",s.processing_fee.toLocaleString("en-US",{style:"currency",currency:"USD"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{n(s),t(!0)},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(s.id),className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:e.jsx(R,{className:"h-4 w-4"})})]})]})},s.id)})})}),o&&e.jsx(W,{bankAccounts:S,onClose:()=>a(!1),onSubmit:T}),c&&r&&e.jsx(G,{accountType:r,bankAccounts:S,onClose:()=>{t(!1),n(null)},onSubmit:q})]})}function W({bankAccounts:l,onClose:d,onSubmit:m}){const[o,a]=i.useState({name:"",description:"",min_balance:0,profit_rate:0,withdrawal_rules:{},processing_fee:0,bank_account_id:l.length>0?l[0].id:""}),c=t=>{t.preventDefault(),m(o)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Account Type"}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Type Name"}),e.jsx("input",{type:"text",required:!0,value:o.name,onChange:t=>a(r=>({...r,name:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:o.description||"",onChange:t=>a(r=>({...r,description:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),e.jsx("select",{required:!0,value:o.bank_account_id,onChange:t=>a(r=>({...r,bank_account_id:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:l.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Balance"}),e.jsx("input",{type:"number",required:!0,value:o.min_balance,onChange:t=>a(r=>({...r,min_balance:parseFloat(t.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Profit Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:o.profit_rate,onChange:t=>a(r=>({...r,profit_rate:parseFloat(t.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Processing Fee"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:o.processing_fee,onChange:t=>a(r=>({...r,processing_fee:parseFloat(t.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Withdrawal Rules (JSON)"}),e.jsx("textarea",{value:JSON.stringify(o.withdrawal_rules,null,2),onChange:t=>{try{a(r=>({...r,withdrawal_rules:JSON.parse(t.target.value)}))}catch(r){console.error("Invalid JSON for withdrawal rules",r)}},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",rows:5})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-md",children:"Create Account Type"})]})]})]})})})}function G({accountType:l,bankAccounts:d,onClose:m,onSubmit:o}){const[a,c]=i.useState({name:l.name,description:l.description||"",min_balance:l.min_balance,profit_rate:l.profit_rate,withdrawal_rules:l.withdrawal_rules,processing_fee:l.processing_fee,bank_account_id:l.bank_account_id}),t=r=>{r.preventDefault(),o(a)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Account Type"}),e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Type Name"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:r=>c(n=>({...n,name:r.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:a.description||"",onChange:r=>c(n=>({...n,description:r.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),e.jsx("select",{required:!0,value:a.bank_account_id,onChange:r=>c(n=>({...n,bank_account_id:r.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:d.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Balance"}),e.jsx("input",{type:"number",required:!0,value:a.min_balance,onChange:r=>c(n=>({...n,min_balance:parseFloat(r.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Profit Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:a.profit_rate,onChange:r=>c(n=>({...n,profit_rate:parseFloat(r.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Processing Fee"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:a.processing_fee,onChange:r=>c(n=>({...n,processing_fee:parseFloat(r.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Withdrawal Rules (JSON)"}),e.jsx("textarea",{value:JSON.stringify(a.withdrawal_rules,null,2),onChange:r=>{try{c(n=>({...n,withdrawal_rules:JSON.parse(r.target.value)}))}catch(n){console.error("Invalid JSON for withdrawal rules",n)}},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",rows:5})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-md",children:"Update Account Type"})]})]})]})})})}export{ee as default};
