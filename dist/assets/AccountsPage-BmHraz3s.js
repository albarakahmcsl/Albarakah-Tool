import{c as F,e as z,r as i,j as e,W as Q,m as U,t as B,C as I,w as b,i as N,q as m,n as W,v as X}from"./index-M2hJuDYi.js";import{u as w}from"./useQuery-eoL25xFq.js";import{u as _,P as R,S as G,T as H}from"./trash-2-DUX7L9we.js";import{D as J}from"./dollar-sign-BFSF7bs6.js";import{S as V}from"./square-pen-Be_6kmVO.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=F("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=F("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function le(){const l=z(),[d,x]=i.useState(""),[p,c]=i.useState(!1),[r,o]=i.useState(!1),[a,s]=i.useState(null),[n,f]=i.useState(null),[C,g]=i.useState(null),{data:y,isLoading:D}=w({queryKey:m.accounts(),queryFn:b.getAccounts}),{data:j}=w({queryKey:m.members(),queryFn:W.getMembers}),{data:v}=w({queryKey:m.accountTypes(),queryFn:X.getAccountTypes}),k=_({mutationFn:b.createAccount,onSuccess:()=>{g("Account created successfully"),c(!1),l.invalidateQueries({queryKey:m.accounts()})},onError:t=>{f(t instanceof N?t.message:"Failed to create account")}}),S=_({mutationFn:({accountId:t,accountData:u})=>b.updateAccount(t,u),onSuccess:()=>{g("Account updated successfully"),o(!1),s(null),l.invalidateQueries({queryKey:m.accounts()})},onError:t=>{f(t instanceof N?t.message:"Failed to update account")}}),A=_({mutationFn:b.deleteAccount,onSuccess:()=>{g("Account deleted successfully"),l.invalidateQueries({queryKey:m.accounts()})},onError:t=>{f(t instanceof N?t.message:"Failed to delete account")}}),L=t=>{k.mutate(t)},E=t=>{a&&S.mutate({accountId:a.id,accountData:t})},P=t=>{confirm("Are you sure you want to delete this account? This action cannot be undone.")&&A.mutate(t)},T=(y==null?void 0:y.accounts)||[],q=(j==null?void 0:j.members)||[],M=(v==null?void 0:v.account_types)||[],K=D||k.isPending||S.isPending||A.isPending,O=T.filter(t=>{var u,h;return t.account_number.toLowerCase().includes(d.toLowerCase())||((u=t.members)==null?void 0:u.full_name)&&t.members.full_name.toLowerCase().includes(d.toLowerCase())||((h=t.account_types)==null?void 0:h.name)&&t.account_types.name.toLowerCase().includes(d.toLowerCase())});return e.jsxs("div",{className:"space-y-6 pt-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage individual member accounts and their details."})]}),e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Add Account"]})]}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-red-800",children:n})}),C&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsx("p",{className:"text-green-800",children:C})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(G,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:d,onChange:t=>x(t.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Search accounts..."})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:K?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):e.jsx("ul",{className:"divide-y divide-gray-200",children:O.map(t=>{var u,h;return e.jsx("li",{children:e.jsxs("div",{className:"px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center",children:e.jsx(Q,{className:"h-5 w-5 text-emerald-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.account_number}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-1"})," Member: ",((u=t.members)==null?void 0:u.full_name)||"N/A"]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(B,{className:"h-4 w-4 mr-1"})," Type: ",((h=t.account_types)==null?void 0:h.name)||"N/A"]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(J,{className:"h-4 w-4 mr-1"})," Balance: ",t.balance.toLocaleString("en-US",{style:"currency",currency:"USD"})]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"})," Open Date: ",new Date(t.open_date).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Status: ",e.jsx("span",{className:"font-medium capitalize",children:t.status})]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:["Processing Fee Paid: ",t.processing_fee_paid?e.jsx(I,{className:"h-4 w-4 text-green-500 ml-1"}):e.jsx(Z,{className:"h-4 w-4 text-red-500 ml-1"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{s(t),o(!0)},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(t.id),className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:e.jsx(H,{className:"h-4 w-4"})})]})]})},t.id)})})}),p&&e.jsx($,{members:q,accountTypes:M,onClose:()=>c(!1),onSubmit:L}),r&&a&&e.jsx(ee,{account:a,members:q,accountTypes:M,onClose:()=>{o(!1),s(null)},onSubmit:E})]})}function $({members:l,accountTypes:d,onClose:x,onSubmit:p}){const[c,r]=i.useState({member_id:l.length>0?l[0].id:"",account_type_id:d.length>0?d[0].id:"",account_number:"",balance:0,open_date:new Date().toISOString().split("T")[0],status:"open"}),o=a=>{a.preventDefault(),p(c)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Account"}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Member"}),e.jsx("select",{required:!0,value:c.member_id,onChange:a=>r(s=>({...s,member_id:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:l.map(a=>e.jsx("option",{value:a.id,children:a.full_name},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Type"}),e.jsx("select",{required:!0,value:c.account_type_id,onChange:a=>r(s=>({...s,account_type_id:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:d.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Number"}),e.jsx("input",{type:"text",required:!0,value:c.account_number,onChange:a=>r(s=>({...s,account_number:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Balance"}),e.jsx("input",{type:"number",step:"0.01",value:c.balance,onChange:a=>r(s=>({...s,balance:parseFloat(a.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Open Date"}),e.jsx("input",{type:"date",value:c.open_date,onChange:a=>r(s=>({...s,open_date:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:c.status,onChange:a=>r(s=>({...s,status:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-md",children:"Create Account"})]})]})]})})})}function ee({account:l,members:d,accountTypes:x,onClose:p,onSubmit:c}){const[r,o]=i.useState({member_id:l.member_id,account_type_id:l.account_type_id,account_number:l.account_number,balance:l.balance,open_date:l.open_date.split("T")[0],status:l.status,processing_fee_paid:l.processing_fee_paid}),a=s=>{s.preventDefault(),c(r)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Account"}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Member"}),e.jsx("select",{required:!0,value:r.member_id,onChange:s=>o(n=>({...n,member_id:s.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:d.map(s=>e.jsx("option",{value:s.id,children:s.full_name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Type"}),e.jsx("select",{required:!0,value:r.account_type_id,onChange:s=>o(n=>({...n,account_type_id:s.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Number"}),e.jsx("input",{type:"text",required:!0,value:r.account_number,onChange:s=>o(n=>({...n,account_number:s.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Balance"}),e.jsx("input",{type:"number",step:"0.01",value:r.balance,onChange:s=>o(n=>({...n,balance:parseFloat(s.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Open Date"}),e.jsx("input",{type:"date",value:r.open_date,onChange:s=>o(n=>({...n,open_date:s.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:r.status,onChange:s=>o(n=>({...n,status:s.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"processing_fee_paid",checked:r.processing_fee_paid,onChange:s=>o(n=>({...n,processing_fee_paid:s.target.checked})),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),e.jsx("label",{htmlFor:"processing_fee_paid",className:"ml-2 text-sm text-gray-700",children:"Processing Fee Paid"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-md",children:"Update Account"})]})]})]})})})}export{le as default};
