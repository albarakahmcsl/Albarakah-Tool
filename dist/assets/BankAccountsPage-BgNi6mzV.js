import{e as _,r as i,j as e,o as F,p as m,i as g,q as u}from"./index-DuNJr4fv.js";import{u as L}from"./useQuery-BHw5W3BA.js";import{u as p,P as D,S as K,T as P}from"./trash-2-CHzf9DYV.js";import{B as Q}from"./banknote-DrxC930i.js";import{S as T}from"./square-pen-BXBrY6W0.js";function O(){const a=_(),[l,d]=i.useState(""),[r,c]=i.useState(!1),[n,s]=i.useState(!1),[o,x]=i.useState(null),[y,b]=i.useState(null),[j,f]=i.useState(null),{data:h,isLoading:w}=L({queryKey:u.bankAccounts(),queryFn:m.getBankAccounts}),v=p({mutationFn:m.createBankAccount,onSuccess:()=>{f("Bank account created successfully"),c(!1),a.invalidateQueries({queryKey:u.bankAccounts()})},onError:t=>{b(t instanceof g?t.message:"Failed to create bank account")}}),N=p({mutationFn:({bankAccountId:t,bankAccountData:E})=>m.updateBankAccount(t,E),onSuccess:()=>{f("Bank account updated successfully"),s(!1),x(null),a.invalidateQueries({queryKey:u.bankAccounts()}),a.invalidateQueries({queryKey:u.accountTypes()})},onError:t=>{b(t instanceof g?t.message:"Failed to update bank account")}}),k=p({mutationFn:m.deleteBankAccount,onSuccess:()=>{f("Bank account deleted successfully"),a.invalidateQueries({queryKey:u.bankAccounts()}),a.invalidateQueries({queryKey:u.accountTypes()})},onError:t=>{b(t instanceof g?t.message:"Failed to delete bank account")}}),A=t=>{v.mutate(t)},C=t=>{o&&N.mutate({bankAccountId:o.id,bankAccountData:t})},B=t=>{confirm("Are you sure you want to delete this bank account? This action cannot be undone.")&&k.mutate(t)},S=(h==null?void 0:h.bank_accounts)||[],q=w||v.isPending||N.isPending||k.isPending,M=S.filter(t=>t.name.toLowerCase().includes(l.toLowerCase())||t.account_number.toLowerCase().includes(l.toLowerCase())||t.description&&t.description.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"space-y-6 pt-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bank Account Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage the bank accounts used for financial operations."})]}),e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Bank Account"]})]}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-red-800",children:y})}),j&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsx("p",{className:"text-green-800",children:j})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:l,onChange:t=>d(t.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Search bank accounts..."})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:q?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):e.jsx("ul",{className:"divide-y divide-gray-200",children:M.map(t=>e.jsx("li",{children:e.jsxs("div",{className:"px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center",children:e.jsx(F,{className:"h-5 w-5 text-emerald-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 mr-1"})," ",t.account_number]}),t.description&&e.jsx("div",{className:"text-sm text-gray-500",children:t.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{x(t),s(!0)},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>B(t.id),className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:e.jsx(P,{className:"h-4 w-4"})})]})]})},t.id))})}),r&&e.jsx(z,{onClose:()=>c(!1),onSubmit:A}),n&&o&&e.jsx(U,{bankAccount:o,onClose:()=>{s(!1),x(null)},onSubmit:C})]})}function z({onClose:a,onSubmit:l}){const[d,r]=i.useState({name:"",account_number:"",description:""}),c=n=>{n.preventDefault(),l(d)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Bank Account"}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Name"}),e.jsx("input",{type:"text",required:!0,value:d.name,onChange:n=>r(s=>({...s,name:n.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Number"}),e.jsx("input",{type:"text",required:!0,value:d.account_number,onChange:n=>r(s=>({...s,account_number:n.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:d.description||"",onChange:n=>r(s=>({...s,description:n.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-md",children:"Create Bank Account"})]})]})]})})})}function U({bankAccount:a,onClose:l,onSubmit:d}){const[r,c]=i.useState({name:a.name,account_number:a.account_number,description:a.description||""}),n=s=>{s.preventDefault(),d(r)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Bank Account"}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Name"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:s=>c(o=>({...o,name:s.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Number"}),e.jsx("input",{type:"text",required:!0,value:r.account_number,onChange:s=>c(o=>({...o,account_number:s.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:r.description||"",onChange:s=>c(o=>({...o,description:s.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-md",children:"Update Bank Account"})]})]})]})})})}export{O as default};
