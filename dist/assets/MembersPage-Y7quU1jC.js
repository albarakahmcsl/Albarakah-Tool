import{c as C,e as F,r as i,j as e,m as L,n as u,i as p,q as x}from"./index-DuNJr4fv.js";import{u as D}from"./useQuery-BHw5W3BA.js";import{u as y,P as K,S as Q,T}from"./trash-2-CHzf9DYV.js";import{M as z}from"./mail-DIDZEc15.js";import{S as I}from"./square-pen-BXBrY6W0.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=C("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=C("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);function W(){const n=F(),[c,o]=i.useState(""),[r,d]=i.useState(!1),[a,t]=i.useState(!1),[l,b]=i.useState(null),[j,h]=i.useState(null),[v,f]=i.useState(null),{data:g,isLoading:k}=D({queryKey:x.members(),queryFn:u.getMembers}),N=y({mutationFn:u.createMember,onSuccess:()=>{f("Member created successfully"),d(!1),n.invalidateQueries({queryKey:x.members()})},onError:s=>{h(s instanceof p?s.message:"Failed to create member")}}),w=y({mutationFn:({memberId:s,memberData:m})=>u.updateMember(s,m),onSuccess:()=>{f("Member updated successfully"),t(!1),b(null),n.invalidateQueries({queryKey:x.members()})},onError:s=>{h(s instanceof p?s.message:"Failed to update member")}}),M=y({mutationFn:u.deleteMember,onSuccess:()=>{f("Member deleted successfully"),n.invalidateQueries({queryKey:x.members()})},onError:s=>{h(s instanceof p?s.message:"Failed to delete member")}}),S=s=>{N.mutate(s)},_=s=>{l&&w.mutate({memberId:l.id,memberData:s})},q=s=>{confirm("Are you sure you want to delete this member? This action cannot be undone.")&&M.mutate(s)},P=(g==null?void 0:g.members)||[],E=k||N.isPending||w.isPending||M.isPending,A=P.filter(s=>s.full_name.toLowerCase().includes(c.toLowerCase())||s.contact_email.toLowerCase().includes(c.toLowerCase())||s.phone_number&&s.phone_number.toLowerCase().includes(c.toLowerCase()));return e.jsxs("div",{className:"space-y-6 pt-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Member Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage all registered members and their details."})]}),e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Add Member"]})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-red-800",children:j})}),v&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsx("p",{className:"text-green-800",children:v})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Q,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:c,onChange:s=>o(s.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Search members..."})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:E?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):e.jsx("ul",{className:"divide-y divide-gray-200",children:A.map(s=>{var m;return e.jsx("li",{children:e.jsxs("div",{className:"px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center",children:e.jsx(L,{className:"h-5 w-5 text-emerald-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.full_name}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-1"})," ",s.contact_email]}),s.phone_number&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(R,{className:"h-4 w-4 mr-1"})," ",s.phone_number]}),s.address&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-1"})," ",s.address]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Status: ",e.jsx("span",{className:"font-medium capitalize",children:s.status})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Accounts: ",((m=s.accounts)==null?void 0:m.length)||0]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{b(s),t(!0)},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>q(s.id),className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:e.jsx(T,{className:"h-4 w-4"})})]})]})},s.id)})})}),r&&e.jsx(Z,{onClose:()=>d(!1),onSubmit:S}),a&&l&&e.jsx(B,{member:l,onClose:()=>{t(!1),b(null)},onSubmit:_})]})}function Z({onClose:n,onSubmit:c}){const[o,r]=i.useState({full_name:"",contact_email:"",phone_number:"",address:"",status:"active"}),d=a=>{a.preventDefault(),c(o)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Member"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),e.jsx("input",{type:"text",required:!0,value:o.full_name,onChange:a=>r(t=>({...t,full_name:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Email"}),e.jsx("input",{type:"email",required:!0,value:o.contact_email,onChange:a=>r(t=>({...t,contact_email:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"text",value:o.phone_number||"",onChange:a=>r(t=>({...t,phone_number:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("textarea",{value:o.address||"",onChange:a=>r(t=>({...t,address:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:o.status,onChange:a=>r(t=>({...t,status:a.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-md",children:"Create Member"})]})]})]})})})}function B({member:n,onClose:c,onSubmit:o}){const[r,d]=i.useState({full_name:n.full_name,contact_email:n.contact_email,phone_number:n.phone_number||"",address:n.address||"",status:n.status}),a=t=>{t.preventDefault(),o(r)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Member"}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),e.jsx("input",{type:"text",required:!0,value:r.full_name,onChange:t=>d(l=>({...l,full_name:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Email"}),e.jsx("input",{type:"email",required:!0,value:r.contact_email,onChange:t=>d(l=>({...l,contact_email:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"text",value:r.phone_number||"",onChange:t=>d(l=>({...l,phone_number:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("textarea",{value:r.address||"",onChange:t=>d(l=>({...l,address:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:r.status,onChange:t=>d(l=>({...l,status:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded-md",children:"Update Member"})]})]})]})})})}export{W as default};
